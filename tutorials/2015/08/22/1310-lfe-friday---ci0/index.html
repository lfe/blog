

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>
      LFE Blog
      
         - LFE Friday - c:i/0
      
    </title>
    <meta name="description" content="">
    <meta name="author" content="LFEuminati | Alien Alliance">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="/assets/themes/lfe/css/reset.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="/assets/themes/lfe/css-social-buttons/css/zocial.stripped.css">
    <link href="/assets/themes/lfe/css/darkstrap.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/lfe/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/css/twilight.css" rel="stylesheet" type="text/css" media="all">

    <link href="/assets/themes/lfe/css/lfetheme.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/lfe/css/pygments.css" media="screen" rel="stylesheet" type="text/css">
    <link href="/assets/css/overrides.css" rel="stylesheet" type="text/css" media="all">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="LFE News & Updates Atom Feed">
  </head>
  <body class="overview">
    <div id="header-wrapper">
      <div id="header">
        <div>
          <a class="logo" href="/">LFE Blog</a>
          <ul class="nav">
            <li><a href="/archive.html" class="nav-api">Archives</a></li>
            <li><a href="/categories.html" class="nav-developers">Categories</a></li>
            <li><a href="/tags.html" class="nav-developers">Tags</a></li>
            <li><a href="/authors.html">Authors</a></li>
            <li class="divider">|</li>
            <li><a href="http://plan.lfe.io/">.plan</a></li>
            <li><a href="http://docs.lfe.io/">docs.lfe.io</a></li>
            <li><a href="http://lfe.io/">lfe.io</a></li>
          </ul>
        </div>
      </div><!-- #header -->
    </div><!-- #header-wrapper -->

    

<div class="wrapper">
  <div class="container">
    <div class="content">
      
      <div class="page-header">
        <h1>
          LFE Friday - c:i/0
          
        </h1>
      </div>

      <div class="row">
        <div class="span8">
          
<p><a href="/assets/images/posts/LispFlavoredErlang-medium-square.png"><img class="left tiny" src="/assets/images/posts/LispFlavoredErlang-medium-square.png" /></a>This week's LFE Friday was translated with permission from the
<a href="http://www.proctor-it.com/category/erlang/erlang-thursday/">Erlang Thursday</a>
series by <a href="https://twitter.com/stevenproctor">Steven Proctor</a>.
<em>This week's translator</em>: Robert Virding.</p>

<p>Today's LFE Friday continues with another function in the <code>c</code> module, <a href="http://erlang.org/doc/man/c.html#i-0">c:i/0</a>.</p>

<p><code>c:i/0</code> reports the system information, displaying information about all the processes on a given node.</p>

<div class="highlight"><pre><code class="language-lisp"><span class="nb">&gt;</span> <span class="p">(</span><span class="nv">c:i</span><span class="p">)</span>
<span class="nv">Pid</span>                   <span class="nv">Initial</span> <span class="nv">Call</span>                          <span class="nv">Heap</span>     <span class="nv">Reds</span> <span class="nv">Msgs</span>
<span class="nv">Registered</span>            <span class="nv">Current</span> <span class="nv">Function</span>                     <span class="nv">Stack</span>              
<span class="nv">&lt;0.0.0&gt;</span>               <span class="nv">otp_ring0:start/2</span>                     <span class="mi">1598</span>     <span class="mi">2392</span>    <span class="mi">0</span>
<span class="nv">init</span>                  <span class="nv">init:loop/1</span>                              <span class="mi">2</span>              
<span class="nv">&lt;0.3.0&gt;</span>               <span class="nv">erlang:apply/2</span>                        <span class="mi">6772</span>   <span class="mi">176779</span>    <span class="mi">0</span>
<span class="nv">erl_prim_loader</span>       <span class="nv">erl_prim_loader:loop/3</span>                   <span class="mi">6</span>              
<span class="nv">&lt;0.6.0&gt;</span>               <span class="nv">gen_event:init_it/6</span>                    <span class="mi">376</span>      <span class="mi">223</span>    <span class="mi">0</span>
<span class="nv">error_logger</span>          <span class="nv">gen_event:fetch_msg/5</span>                    <span class="mi">8</span>              
<span class="nv">&lt;0.7.0&gt;</span>               <span class="nv">erlang:apply/2</span>                         <span class="mi">987</span>      <span class="mi">404</span>    <span class="mi">0</span>
<span class="nv">application_controlle</span> <span class="nv">gen_server:loop/6</span>                        <span class="mi">7</span>              
<span class="nv">&lt;0.9.0&gt;</span>               <span class="nv">application_master:init/4</span>              <span class="mi">376</span>       <span class="mi">44</span>    <span class="mi">0</span>
                      <span class="nv">application_master:main_loop/2</span>           <span class="mi">6</span>              
<span class="nv">&lt;0.10.0&gt;</span>              <span class="nv">application_master:start_it/4</span>          <span class="mi">233</span>       <span class="mi">73</span>    <span class="mi">0</span>
                      <span class="nv">application_master:loop_it/4</span>             <span class="mi">5</span>              
<span class="nv">&lt;0.11.0&gt;</span>              <span class="nv">supervisor:kernel/1</span>                    <span class="mi">376</span>     <span class="mi">1891</span>    <span class="mi">0</span>
<span class="nv">kernel_sup</span>            <span class="nv">gen_server:loop/6</span>                        <span class="mi">9</span>              
<span class="nv">&lt;0.12.0&gt;</span>              <span class="nv">erlang:apply/2</span>                        <span class="mi">6772</span>   <span class="mi">129164</span>    <span class="mi">0</span>
<span class="nv">code_server</span>           <span class="nv">code_server:loop/1</span>                       <span class="mi">3</span>              
<span class="nv">&lt;0.14.0&gt;</span>              <span class="nv">rpc:init/1</span>                             <span class="mi">233</span>       <span class="mi">21</span>    <span class="mi">0</span>
<span class="nv">rex</span>                   <span class="nv">gen_server:loop/6</span>                        <span class="mi">9</span>              
<span class="nv">&lt;0.15.0&gt;</span>              <span class="nv">global:init/1</span>                          <span class="mi">233</span>       <span class="mi">45</span>    <span class="mi">0</span>
<span class="nv">global_name_server</span>    <span class="nv">gen_server:loop/6</span>                        <span class="mi">9</span>              
<span class="nv">&lt;0.16.0&gt;</span>              <span class="nv">erlang:apply/2</span>                         <span class="mi">233</span>       <span class="mi">21</span>    <span class="mi">0</span>
                      <span class="nv">global:loop_the_locker/1</span>                 <span class="mi">5</span>              
<span class="nv">&lt;0.17.0&gt;</span>              <span class="nv">erlang:apply/2</span>                         <span class="mi">233</span>        <span class="mi">3</span>    <span class="mi">0</span>
                      <span class="nv">global:loop_the_registrar/0</span>              <span class="mi">2</span>              
<span class="nv">&lt;0.18.0&gt;</span>              <span class="nv">inet_db:init/1</span>                         <span class="mi">376</span>      <span class="mi">236</span>    <span class="mi">0</span>
<span class="nv">inet_db</span>               <span class="nv">gen_server:loop/6</span>                        <span class="mi">9</span>              
<span class="nv">&lt;0.19.0&gt;</span>              <span class="nv">global_group:init/1</span>                    <span class="mi">233</span>       <span class="mi">53</span>    <span class="mi">0</span>
<span class="nv">global_group</span>          <span class="nv">gen_server:loop/6</span>                        <span class="mi">9</span>              
<span class="nv">&lt;0.20.0&gt;</span>              <span class="nv">file_server:init/1</span>                     <span class="mi">233</span>       <span class="mi">84</span>    <span class="mi">0</span>
<span class="nv">file_server_2</span>         <span class="nv">gen_server:loop/6</span>                        <span class="mi">9</span>              
<span class="nv">&lt;0.21.0&gt;</span>              <span class="nv">supervisor_bridge:standard_error/</span>      <span class="mi">233</span>       <span class="mi">34</span>    <span class="mi">0</span>
<span class="nv">standard_error_sup</span>    <span class="nv">gen_server:loop/6</span>                        <span class="mi">9</span>              
<span class="nv">&lt;0.22.0&gt;</span>              <span class="nv">erlang:apply/2</span>                         <span class="mi">233</span>        <span class="mi">9</span>    <span class="mi">0</span>
<span class="nv">standard_error</span>        <span class="nv">standard_error:server_loop/1</span>             <span class="mi">2</span>              
<span class="nv">&lt;0.23.0&gt;</span>              <span class="nv">supervisor_bridge:user_sup/1</span>           <span class="mi">233</span>       <span class="mi">69</span>    <span class="mi">0</span>
                      <span class="nv">gen_server:loop/6</span>                        <span class="mi">9</span>              
<span class="nv">&lt;0.24.0&gt;</span>              <span class="nv">user_drv:server/2</span>                     <span class="mi">1598</span>     <span class="mi">2064</span>    <span class="mi">0</span>
<span class="nv">user_drv</span>              <span class="nv">user_drv:server_loop/6</span>                   <span class="mi">9</span>              
<span class="nv">&lt;0.25.0&gt;</span>              <span class="nv">group:server/3</span>                         <span class="mi">233</span>       <span class="mi">36</span>    <span class="mi">0</span>
<span class="nv">user</span>                  <span class="nv">group:server_loop/3</span>                      <span class="mi">4</span>              
<span class="nv">&lt;0.26.0&gt;</span>              <span class="nv">group:server/3</span>                         <span class="mi">987</span>    <span class="mi">11825</span>    <span class="mi">0</span>
                      <span class="nv">group:server_loop/3</span>                      <span class="mi">4</span>              
<span class="nv">&lt;0.27.0&gt;</span>              <span class="nv">erlang:apply/2</span>                         <span class="mi">233</span>      <span class="mi">360</span>    <span class="mi">0</span>
                      <span class="nv">lfe_shell:shell_eval/3</span>                   <span class="mi">5</span>              
<span class="nv">&lt;0.28.0&gt;</span>              <span class="nv">erlang:apply/2</span>                        <span class="mi">6772</span>    <span class="mi">17553</span>    <span class="mi">0</span>
                      <span class="nv">c:pinfo/1</span>                               <span class="mi">38</span>              
<span class="nv">&lt;0.30.0&gt;</span>              <span class="nv">kernel_config:init/1</span>                   <span class="mi">233</span>      <span class="mi">233</span>    <span class="mi">0</span>
                      <span class="nv">gen_server:loop/6</span>                        <span class="mi">9</span>              
<span class="nv">&lt;0.31.0&gt;</span>              <span class="nv">supervisor:kernel/1</span>                    <span class="mi">233</span>       <span class="mi">56</span>    <span class="mi">0</span>
<span class="nv">kernel_safe_sup</span>       <span class="nv">gen_server:loop/6</span>                        <span class="mi">9</span>              
<span class="nv">Total</span>                                                      <span class="mi">30252</span>   <span class="mi">343672</span>    <span class="mi">0</span>
                                                             <span class="mi">196</span>              
<span class="nv">ok</span></code></pre></div>

<p>We can see that it returns the process id (pid), the initial function that started the process, the size of the heap, the number of reductions, the number of messages in the message queue, the registered name, the current function the process is in, and the stack size.</p>

<p><code>c:i/0</code> also includes a total of the total heap size, reductions, message queue size and stack size.</p>

<p>There <code>c</code> module also includes a <a href="http://erlang.org/doc/man/c.html#ni-0">c:ni/0</a>, that reports the system information above across all nodes.</p>

<p>Looking at the process info we see a process related to the LFE repl <code>lfe_shell</code>. We can grab the pid of that process by calling <a href="http://erlang.org/doc/man/c.html#i-3">c:i/3</a> which displays information about a process but can reference a pid by the three integer values that make up the process's pid.</p>

<div class="highlight"><pre><code class="language-lisp"><span class="nb">&gt;</span> <span class="p">(</span><span class="nv">c:i</span> <span class="mi">0</span> <span class="mi">27</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="o">#(</span><span class="nv">current_function</span> <span class="o">#(</span><span class="nv">lfe_shell</span> <span class="nv">shell_eval</span> <span class="mi">3</span><span class="p">))</span>
 <span class="o">#(</span><span class="nv">initial_call</span> <span class="o">#(</span><span class="nv">erlang</span> <span class="nb">apply</span> <span class="mi">2</span><span class="p">))</span>
 <span class="o">#(</span><span class="nv">status</span> <span class="nv">waiting</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">message_queue_len</span> <span class="mi">0</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">messages</span> <span class="p">())</span>
 <span class="o">#(</span><span class="nv">links</span> <span class="p">(</span><span class="nv">&lt;0.28.0&gt;</span> <span class="nv">&lt;0.26.0&gt;</span><span class="p">))</span>
 <span class="o">#(</span><span class="nv">dictionary</span> <span class="p">())</span>
 <span class="o">#(</span><span class="nv">trap_exit</span> <span class="nv">true</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">error_handler</span> <span class="nv">error_handler</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">priority</span> <span class="nv">normal</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">group_leader</span> <span class="nv">&lt;0.26.0&gt;</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">total_heap_size</span> <span class="mi">11334</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">heap_size</span> <span class="mi">10958</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">stack_size</span> <span class="mi">5</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">reductions</span> <span class="mi">1576</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">garbage_collection</span>
   <span class="p">(</span><span class="o">#(</span><span class="nv">min_bin_vheap_size</span> <span class="mi">46422</span><span class="p">)</span>
    <span class="o">#(</span><span class="nv">min_heap_size</span> <span class="mi">233</span><span class="p">)</span>
    <span class="o">#(</span><span class="nv">fullsweep_after</span> <span class="mi">65535</span><span class="p">)</span>
    <span class="o">#(</span><span class="nv">minor_gcs</span> <span class="mi">6</span><span class="p">)))</span>
 <span class="o">#(</span><span class="nv">suspending</span> <span class="p">()))</span></code></pre></div>

<p>When looking at the information related to a specific process, we can see it shows the linked process, messages and message queue length, heap and stack information, ad various other settings that could be of use.</p>

<p>Note that the <code>c:i/0</code> function prints out the data so it is intended to be called from the shell and not from another function. While the output is not as pretty as the <code>observer</code> application this function is very useful when you only have access to through a terminal.</p>

<p>The <code>c:i/0</code> function gets the information about a process using the <code>BIF</code>s <a href="http://erlang.org/doc/man/erlang.html#process_info-1">process_info/1</a> and <a href="http://erlang.org/doc/man/erlang.html#process_info-2">process_info/2</a>. These functions are very useful when need to access the process information from within a function or application.</p>

<div class="highlight"><pre><code class="language-lisp"><span class="nb">&gt;</span> <span class="p">(</span><span class="nv">process_info</span> <span class="p">(</span><span class="nv">pid</span> <span class="mi">0</span> <span class="mi">27</span> <span class="mi">0</span><span class="p">))</span>
<span class="p">(</span><span class="o">#(</span><span class="nv">current_function</span> <span class="o">#(</span><span class="nv">lfe_shell</span> <span class="nv">shell_eval</span> <span class="mi">3</span><span class="p">))</span>
 <span class="o">#(</span><span class="nv">initial_call</span> <span class="o">#(</span><span class="nv">erlang</span> <span class="nb">apply</span> <span class="mi">2</span><span class="p">))</span>
 <span class="o">#(</span><span class="nv">status</span> <span class="nv">waiting</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">message_queue_len</span> <span class="mi">0</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">messages</span> <span class="p">())</span>
 <span class="o">#(</span><span class="nv">links</span> <span class="p">(</span><span class="nv">&lt;0.38.0&gt;</span> <span class="nv">&lt;0.26.0&gt;</span><span class="p">))</span>
 <span class="o">#(</span><span class="nv">dictionary</span> <span class="p">())</span>
 <span class="o">#(</span><span class="nv">trap_exit</span> <span class="nv">true</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">error_handler</span> <span class="nv">error_handler</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">priority</span> <span class="nv">normal</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">group_leader</span> <span class="nv">&lt;0.26.0&gt;</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">total_heap_size</span> <span class="mi">57380</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">heap_size</span> <span class="mi">28690</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">stack_size</span> <span class="mi">5</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">reductions</span> <span class="mi">3770</span><span class="p">)</span>
 <span class="o">#(</span><span class="nv">garbage_collection</span>
   <span class="p">(</span><span class="o">#(</span><span class="nv">min_bin_vheap_size</span> <span class="mi">46422</span><span class="p">)</span>
    <span class="o">#(</span><span class="nv">min_heap_size</span> <span class="mi">233</span><span class="p">)</span>
    <span class="o">#(</span><span class="nv">fullsweep_after</span> <span class="mi">65535</span><span class="p">)</span>
    <span class="o">#(</span><span class="nv">minor_gcs</span> <span class="mi">1</span><span class="p">)))</span>
 <span class="o">#(</span><span class="nv">suspending</span> <span class="p">()))</span></code></pre></div>

<p>As with the <code>c</code> functions <a href="http://blog.lfe.io/tutorials/2015/08/10/0123-lfe-friday---cm1/">c:m/1</a> and <a href="http://blog.lfe.io/tutorials/2015/08/15/0226-lfe-friday---cregs0/">c:regs/0</a> this function exists as an LFE repl built-in command which can be called from the repl with just <code>(i)</code>.</p>

<p>-Proctor, Robert</p>

          <hr>
          <div class="pagination btn-group">
            
            <a class="btn prev" href="/tutorials/2015/08/15/0226-lfe-friday---cregs0" title="LFE Friday - c:regs/0">&larr; Previous</a>
            
            <a class="btn" href="/archive.html">Archive</a>
            
            <a class="btn next" href="/tutorials/2015/09/05/0107-lfe-friday---cpid3" title="LFE Friday - c:pid/3">Next &rarr;</a>
            
          </div>
          <hr>
          
        </div>

        <div class="span4">
          <section>
            <h4>Author</h4>
            <div class="author"><span><a href="/authors.html#Robert Virding">Robert Virding</a></span></div>
          </section>
          <section>
            <h4>Published</h4>
            <div class="date"><span>22 August 2015</span></div>
          </section>
          
          <section>
            <h4>Category</h4>
            <span class="category">
              tutorials
            </span>
          </section>
          
          
          <section>
            <h4>Tags</h4>
            <ul class="tag_box">
              
              


  
     
    	<li><a href="/tags.html#lfe friday-ref">lfe friday <span>58</span></a></li>
     
    	<li><a href="/tags.html#lfe-ref">lfe <span>63</span></a></li>
     
    	<li><a href="/tags.html#erlang-ref">erlang <span>71</span></a></li>
    
  



            </ul>
          </section>
          
        </div>
      </div>


    </div>
  </div> <!-- /container -->
</div>




    <div id="footer" >
    <div class="lower_footer">
      <ul class="footer-cell">
        <li><a href="/archive.html">Archives</a></li>
        <li><a href="/categories.html">Categories</a></li>
        <li><a href="/tags.html">Tags</a></li>
        <li><a href="/authors.html">Authors</a></li>
        <li><a href="/pages.html">Pages</a></li>
      </ul>

      <span class="footer-cell">
        <a href="/"><img src="/assets/themes/lfe/images/logo-white.png"/></a>
      </span>

      <ul class="footer-cell">
        <li><a href="http://github.com/lfex">lfex</a></li>
        <li><a href="https://groups.google.com/forum/#!forum/lisp-flavoured-erlang">List</a></li>
        <li><a href="http://webchat.freenode.net/?channels=erlang-lisp">IRC</a></li>
        <li><a href="http://feeds.feedburner.com/lfe/news-and-updates">RSS</a></li>
        <li><a href="http://twitter.com/ErlangLisp">Twitter</a></li>
        <li><a href="http://github.com/rvirding/lfe">Github</a></li>
      </ul>
    </div>

    <div class="wrapper">
      <p>Original Design &copy; <span class="js-year"></span> GitHub, Inc.</p>
      <p>LFE Design and Content &copy; <span class="js-year"></span> LFEuminati | Alien Alliance</p>
    </div>

  </div><!-- /#footer -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/assets/themes/lfe/js/jquery.min.js"><\/script>')</script>
    <script src="/assets/themes/lfe/bootstrap/js/bootstrap.min.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-38274766-2', 'auto');
      ga('send', 'pageview');

    </script>
  </body>
</html>

