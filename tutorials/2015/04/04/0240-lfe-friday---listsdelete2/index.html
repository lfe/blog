

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>
      LFE Blog
      
         - LFE Friday - lists:delete/2
      
    </title>
    <meta name="description" content="">
    <meta name="author" content="LFEuminati | Alien Alliance">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="/assets/themes/lfe/css/reset.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="/assets/themes/lfe/css-social-buttons/css/zocial.stripped.css">
    <link href="/assets/themes/lfe/css/darkstrap.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/lfe/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/css/twilight.css" rel="stylesheet" type="text/css" media="all">

    <link href="/assets/themes/lfe/css/lfetheme.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/lfe/css/pygments.css" media="screen" rel="stylesheet" type="text/css">
    <link href="/assets/css/overrides.css" rel="stylesheet" type="text/css" media="all">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="LFE News & Updates Atom Feed">
  </head>
  <body class="overview">
    <div id="header-wrapper">
      <div id="header">
        <div>
          <a class="logo" href="/">LFE Blog</a>
          <ul class="nav">
            <li><a href="/archive.html" class="nav-api">Archives</a></li>
            <li><a href="/categories.html" class="nav-developers">Categories</a></li>
            <li><a href="/tags.html" class="nav-developers">Tags</a></li>
            <li><a href="/authors.html">Authors</a></li>
            <li class="divider">|</li>
            <li><a href="http://plan.lfe.io/">.plan</a></li>
            <li><a href="http://docs.lfe.io/">docs.lfe.io</a></li>
            <li><a href="http://lfe.io/">lfe.io</a></li>
          </ul>
        </div>
      </div><!-- #header -->
    </div><!-- #header-wrapper -->

    

<div class="wrapper">
  <div class="container">
    <div class="content">
      
      <div class="page-header">
        <h1>
          LFE Friday - lists:delete/2
          
        </h1>
      </div>

      <div class="row">
        <div class="span8">
          
<p><a href="/assets/images/posts/LispFlavoredErlang-medium-square.png"><img class="left tiny" src="/assets/images/posts/LispFlavoredErlang-medium-square.png" /></a>This week's LFE Friday was translated with permission from the
<a href="http://www.proctor-it.com/category/erlang/erlang-thursday/">Erlang Thursday</a>
series by <a href="https://twitter.com/stevenproctor">Steven Proctor</a>.
<em>This week's translator</em>: Robert Virding.</p>

<p>Today’s LFE Friday is about <a href="http://www.erlang.org/doc/man/lists.html#delete-2">lists:delete/2</a>.</p>

<p><code>lists:delete/2</code> takes a Erlang term as it’s first argument, and
will remove that item from the list passed in as the second argument.</p>

<div class="highlight"><pre><code class="language-cl"><span class="nb">&gt;</span> <span class="p">(</span><span class="nv">lists:delete</span> <span class="mi">1</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">8</span> <span class="mi">7</span> <span class="mi">6</span> <span class="mi">5</span> <span class="mi">4</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">1</span><span class="p">))</span>                         
<span class="p">(</span><span class="mi">8</span> <span class="mi">7</span> <span class="mi">6</span> <span class="mi">5</span> <span class="mi">4</span> <span class="mi">3</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">lists:delete</span> <span class="mi">4</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span><span class="p">))</span>    
<span class="p">(</span><span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span><span class="p">)</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">lists:delete</span> <span class="mi">72</span> <span class="s">&quot;Hello World!&quot;</span><span class="p">)</span>
<span class="s">&quot;Hello World!&quot;</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">lists:delete</span> <span class="ss">&#39;d</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span>
<span class="p">(</span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">lists:delete</span> <span class="mi">4</span> <span class="p">())</span>         
<span class="p">()</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">lists:delete</span> <span class="o">#(</span><span class="nv">b</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="o">#(</span><span class="nv">a</span> <span class="mi">1</span><span class="p">)</span> <span class="o">#(</span><span class="nv">b</span> <span class="mi">2</span><span class="p">)</span> <span class="o">#(</span><span class="nv">c</span> <span class="mi">3</span><span class="p">)))</span>
<span class="p">(</span><span class="o">#(</span><span class="nv">a</span> <span class="mi">1</span><span class="p">)</span> <span class="o">#(</span><span class="nv">c</span> <span class="mi">3</span><span class="p">))</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">lists:delete</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">((</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">)</span> <span class="p">(</span><span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span><span class="p">)</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)))</span>
<span class="p">((</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">)</span> <span class="p">(</span><span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span><span class="p">))</span></code></pre></div>

<p>Note that <code>lists:delete/2</code> only removes the first item found in the
list, and leaves any other occurrences of the item in the list.</p>

<div class="highlight"><pre><code class="language-cl"><span class="nb">&gt;</span> <span class="p">(</span><span class="nv">lists:delete</span> <span class="mi">1</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span><span class="p">))</span>                   
<span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span><span class="p">)</span></code></pre></div>

<p>As <code>lists:delete/2</code> was a easy function to demonstrate, and leaving
it at this would be a very short post, I thought it might be worth
showing a how you might write a very naive<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup> implementation of
<code>lists:delete/2</code> yourself.</p>

<div class="highlight"><pre><code class="language-cl"><span class="p">(</span><span class="nv">defmodule</span> <span class="nv">my-lists</span>
  <span class="p">(</span><span class="nb">export</span> <span class="p">(</span><span class="nb">delete</span> <span class="mi">2</span><span class="p">)))</span>
 
<span class="p">(</span><span class="nb">defun</span> <span class="nb">delete</span> <span class="p">(</span><span class="nv">item</span> <span class="nb">list</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">delete</span> <span class="nv">item</span> <span class="nb">list</span> <span class="p">()))</span>
 
<span class="p">(</span><span class="nb">defun</span> <span class="nb">delete</span>
  <span class="p">((</span><span class="nv">item</span> <span class="p">(</span><span class="nb">cons</span> <span class="nv">head</span> <span class="nb">rest</span><span class="p">)</span> <span class="nv">checked</span><span class="p">)</span> <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">=:=</span> <span class="nv">item</span> <span class="nv">head</span><span class="p">))</span>
   <span class="p">(</span><span class="nv">lists:reverse</span> <span class="nv">checked</span> <span class="nb">rest</span><span class="p">))</span>
  <span class="p">((</span><span class="nv">item</span> <span class="p">(</span><span class="nb">cons</span> <span class="nv">head</span> <span class="nb">rest</span><span class="p">)</span> <span class="nv">checked</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">delete</span> <span class="nv">item</span> <span class="nb">rest</span> <span class="p">(</span><span class="nb">cons</span> <span class="nv">head</span> <span class="nv">checked</span><span class="p">)))</span>
  <span class="p">((</span><span class="nv">item</span> <span class="p">()</span> <span class="nv">checked</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">lists:reverse</span> <span class="nv">checked</span><span class="p">)))</span></code></pre></div>

<p>Let’s start with our delete function as we expect it to be called from the outside world.</p>

<p><code>my-lists:delete/2</code> is the nice API function that just calls <code>delete/3</code> which is a “private” function (not exported) so the consumer doesn’t have to worry about passing in the accumulator for the items we have checked so far, which we pass as an empty list for the initial value.</p>

<div class="highlight"><pre><code class="language-cl"><span class="p">(</span><span class="nv">defmodule</span> <span class="nv">my-lists</span>
  <span class="p">(</span><span class="nb">export</span> <span class="p">(</span><span class="nb">delete</span> <span class="mi">2</span><span class="p">)))</span>
 
<span class="p">(</span><span class="nb">defun</span> <span class="nb">delete</span> <span class="p">(</span><span class="nv">item</span> <span class="nb">list</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">delete</span> <span class="nv">item</span> <span class="nb">list</span> <span class="nv">[]</span><span class="p">))</span></code></pre></div>

<p>The first function clause of <code>delete/3</code> uses pattern matching to check if the item we want to delete is also the first item in the rest of the list to check. Note that we have to explicitly test if the item is the head of the list using a guard which is done with <code>when</code>. If the pattern match succeeds, we have found the first occurrence of the item to remove! We can stop processing the list and return the result, which is the reverse of the list of items we have checked so far combined with the rest of the items we never got around to checking<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup>.</p>

<div class="highlight"><pre><code class="language-cl">  <span class="p">((</span><span class="nv">item</span> <span class="p">(</span><span class="nb">cons</span> <span class="nv">head</span> <span class="nb">rest</span><span class="p">)</span> <span class="nv">checked</span><span class="p">)</span> <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">=:=</span> <span class="nv">item</span> <span class="nv">head</span><span class="p">))</span>
   <span class="p">(</span><span class="nv">++</span> <span class="p">(</span><span class="nv">lists:reverse</span> <span class="nv">checked</span><span class="p">)</span> <span class="nb">rest</span><span class="p">))</span></code></pre></div>

<p>The second clause "knows" that the item we are wanting to delete and the first item in the rest of the list don't match. How does it "know"? Because if they did match, the first clause would have matched and this clause would not have been evaluated. As we haven't found the item to remove, we add the item held by <code>head</code> to the list of <code>checked</code> items, and then continue calling <code>delete/3</code>. The fact that we are passing a new list of the checked items by prepending <code>head</code> to the list in <code>checked</code> is why we need to reverse <code>checked</code> in the first and third function clauses.</p>

<div class="highlight"><pre><code class="language-cl">  <span class="p">((</span><span class="nv">item</span> <span class="p">(</span><span class="nb">cons</span> <span class="nv">head</span> <span class="nb">rest</span><span class="p">)</span> <span class="nv">checked</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">delete</span> <span class="nv">item</span> <span class="nb">rest</span> <span class="p">(</span><span class="nb">cons</span> <span class="nv">head</span> <span class="nv">checked</span><span class="p">)))</span></code></pre></div>

<p>The third, and final, clause of <code>delete/3</code> has reached the end of the list and not found the item, so we just return the list we have reversed it.</p>

<div class="highlight"><pre><code class="language-cl">  <span class="p">((</span><span class="nv">item</span> <span class="p">()</span> <span class="nv">checked</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">lists:reverse</span> <span class="nv">checked</span><span class="p">)))</span></code></pre></div>

<p>We will also present an alternative implementation which directly returns the resulting list without keeping a reversed list of items checked so far.</p>

<div class="highlight"><pre><code class="language-cl"><span class="p">(</span><span class="nv">defmodule</span> <span class="nv">my-list</span>
  <span class="p">(</span><span class="nb">export</span> <span class="p">(</span><span class="nb">delete</span> <span class="mi">2</span><span class="p">)))</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nb">delete</span>
  <span class="p">((</span><span class="nv">item</span> <span class="p">(</span><span class="nb">cons</span> <span class="nv">head</span> <span class="nb">rest</span><span class="p">))</span> <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">=:=</span> <span class="nv">item</span> <span class="nv">head</span><span class="p">))</span>
   <span class="nb">rest</span><span class="p">)</span>
  <span class="p">((</span><span class="nv">item</span> <span class="p">(</span><span class="nb">cons</span> <span class="nv">head</span> <span class="nb">rest</span><span class="p">))</span>
   <span class="p">(</span><span class="nb">cons</span> <span class="nv">head</span> <span class="p">(</span><span class="nb">delete</span> <span class="nv">item</span> <span class="nb">rest</span><span class="p">)))</span>
  <span class="p">((</span><span class="nv">item</span> <span class="p">())</span>
   <span class="p">()))</span></code></pre></div>

<p>For a discussion on the relative merits of the two different ways of implementing <code>delete/2</code> see <a href="http://erlang.org/doc/efficiency_guide/myths.html#id59389">myth about tail-recursive functions</a>.</p>

<p>-Proctor, Robert</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>Naive because this is not optimized for performance, or exhaustively tested for completely accurate behavior of <code>lists:delete/2</code>. <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>This can be more efficiently written as <code>(lists:reverse checked rest)</code> as <code>lists:reverse/2</code> is a function which reverses its first argument and appends its second argument. <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

          <hr>
          <div class="pagination btn-group">
            
            <a class="btn prev" href="/tutorials/2015/03/30/1513-lfe-friday---erlanglist_to_atom1" title="LFE Friday - erlang:list_to_atom/1">&larr; Previous</a>
            
            <a class="btn" href="/archive.html">Archive</a>
            
            <a class="btn next" href="/announcements/2015/04/04/1538-lfe-and-dialyzer" title="LFE and dialyzer">Next &rarr;</a>
            
          </div>
          <hr>
          
        </div>

        <div class="span4">
          <section>
            <h4>Author</h4>
            <div class="author"><span><a href="/authors.html#Robert Virding">Robert Virding</a></span></div>
          </section>
          <section>
            <h4>Published</h4>
            <div class="date"><span>04 April 2015</span></div>
          </section>
          
          <section>
            <h4>Category</h4>
            <span class="category">
              tutorials
            </span>
          </section>
          
          
          <section>
            <h4>Tags</h4>
            <ul class="tag_box">
              
              


  
     
    	<li><a href="/tags.html#lfe friday-ref">lfe friday <span>58</span></a></li>
     
    	<li><a href="/tags.html#lfe-ref">lfe <span>63</span></a></li>
     
    	<li><a href="/tags.html#erlang-ref">erlang <span>71</span></a></li>
    
  



            </ul>
          </section>
          
        </div>
      </div>


    </div>
  </div> <!-- /container -->
</div>




    <div id="footer" >
    <div class="lower_footer">
      <ul class="footer-cell">
        <li><a href="/archive.html">Archives</a></li>
        <li><a href="/categories.html">Categories</a></li>
        <li><a href="/tags.html">Tags</a></li>
        <li><a href="/authors.html">Authors</a></li>
        <li><a href="/pages.html">Pages</a></li>
      </ul>

      <span class="footer-cell">
        <a href="/"><img src="/assets/themes/lfe/images/logo-white.png"/></a>
      </span>

      <ul class="footer-cell">
        <li><a href="http://github.com/lfex">lfex</a></li>
        <li><a href="https://groups.google.com/forum/#!forum/lisp-flavoured-erlang">List</a></li>
        <li><a href="http://webchat.freenode.net/?channels=erlang-lisp">IRC</a></li>
        <li><a href="http://feeds.feedburner.com/lfe/news-and-updates">RSS</a></li>
        <li><a href="http://twitter.com/ErlangLisp">Twitter</a></li>
        <li><a href="http://github.com/rvirding/lfe">Github</a></li>
      </ul>
    </div>

    <div class="wrapper">
      <p>Original Design &copy; <span class="js-year"></span> GitHub, Inc.</p>
      <p>LFE Design and Content &copy; <span class="js-year"></span> LFEuminati | Alien Alliance</p>
    </div>

  </div><!-- /#footer -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/assets/themes/lfe/js/jquery.min.js"><\/script>')</script>
    <script src="/assets/themes/lfe/bootstrap/js/bootstrap.min.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-38274766-2', 'auto');
      ga('send', 'pageview');

    </script>
  </body>
</html>

