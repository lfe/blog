

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>
      LFE Blog
      
         - LFE Friday - digraph:del_path/3
      
    </title>
    <meta name="description" content="">
    <meta name="author" content="LFEuminati | Alien Alliance">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="/assets/themes/lfe/css/reset.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="/assets/themes/lfe/css-social-buttons/css/zocial.stripped.css">
    <link href="/assets/themes/lfe/css/darkstrap.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/lfe/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/css/twilight.css" rel="stylesheet" type="text/css" media="all">

    <link href="/assets/themes/lfe/css/lfetheme.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/lfe/css/pygments.css" media="screen" rel="stylesheet" type="text/css">
    <link href="/assets/css/overrides.css" rel="stylesheet" type="text/css" media="all">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="LFE News & Updates Atom Feed">
  </head>
  <body class="overview">
    <div id="header-wrapper">
      <div id="header">
        <div>
          <a class="logo" href="/">LFE Blog</a>
          <ul class="nav">
            <li><a href="/archive.html" class="nav-api">Archives</a></li>
            <li><a href="/categories.html" class="nav-developers">Categories</a></li>
            <li><a href="/tags.html" class="nav-developers">Tags</a></li>
            <li><a href="/authors.html">Authors</a></li>
            <li class="divider">|</li>
            <li><a href="http://plan.lfe.io/">.plan</a></li>
            <li><a href="http://docs.lfe.io/">docs.lfe.io</a></li>
            <li><a href="http://lfe.io/">lfe.io</a></li>
          </ul>
        </div>
      </div><!-- #header -->
    </div><!-- #header-wrapper -->

    

<div class="wrapper">
  <div class="container">
    <div class="content">
      
      <div class="page-header">
        <h1>
          LFE Friday - digraph:del_path/3
          
        </h1>
      </div>

      <div class="row">
        <div class="span8">
          
<p><a href="/assets/images/posts/LispFlavoredErlang-medium-square.png"><img class="left tiny" src="/assets/images/posts/LispFlavoredErlang-medium-square.png" /></a>This week's LFE Friday was translated with permission from the
<a href="http://www.proctor-it.com/category/erlang/erlang-thursday/">Erlang Thursday</a>
series by <a href="https://twitter.com/stevenproctor">Steven Proctor</a>.
<em>This week's translator</em>: Robert Virding.</p>

<p>Today's LFE Friday is on <a href="http://www.erlang.org/doc/man/digraph.html#del_path-3">digraph:del_path/3</a>.</p>

<p>We will continue working with the same graph we started with in the previous post on <a href="http://blog.lfe.io/tutorials/2015/11/07/2209-lfe-friday---digraphget_path3/">digraph:get_path/3</a>.</p>

<p><br /><a href="/assets/images/posts/digraph_get_path_graph.png"><img class="left small" src="/assets/images/posts/digraph_get_path_graph.png" /></a><br /><br /><br /><br /><br /><br /><br /><br /><br /></p>

<div class="highlight"><pre><code class="language-lisp"><span class="nb">&gt;</span> <span class="p">(</span><span class="nb">set</span> <span class="nv">graph</span> <span class="p">(</span><span class="nv">digraph:new</span><span class="p">))</span>
<span class="o">#(</span><span class="nv">digraph</span> <span class="mi">8207</span> <span class="mi">12304</span> <span class="mi">16401</span> <span class="nv">true</span><span class="p">)</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nb">set</span> <span class="nv">v-1</span> <span class="p">(</span><span class="nv">digraph:add_vertex</span> <span class="nv">graph</span> <span class="ss">&#39;v-1</span><span class="p">))</span>
<span class="nv">v-1</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nb">set</span> <span class="nv">v-2</span> <span class="p">(</span><span class="nv">digraph:add_vertex</span> <span class="nv">graph</span> <span class="ss">&#39;v-2</span><span class="p">))</span>
<span class="nv">v-2</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nb">set</span> <span class="nv">v-3</span> <span class="p">(</span><span class="nv">digraph:add_vertex</span> <span class="nv">graph</span> <span class="ss">&#39;v-3</span><span class="p">))</span>
<span class="nv">v-3</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nb">set</span> <span class="nv">v-4</span> <span class="p">(</span><span class="nv">digraph:add_vertex</span> <span class="nv">graph</span> <span class="ss">&#39;v-4</span><span class="p">))</span>
<span class="nv">v-4</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nb">set</span> <span class="nv">e-1</span> <span class="p">(</span><span class="nv">digraph:add_edge</span> <span class="nv">graph</span> <span class="nv">v-1</span> <span class="nv">v-2</span><span class="p">))</span>
<span class="p">(</span><span class="nv">$e</span> <span class="o">.</span> <span class="mi">0</span><span class="p">)</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nb">set</span> <span class="nv">e-2</span> <span class="p">(</span><span class="nv">digraph:add_edge</span> <span class="nv">graph</span> <span class="nv">v-2</span> <span class="nv">v-3</span><span class="p">))</span>
<span class="p">(</span><span class="nv">$e</span> <span class="o">.</span> <span class="mi">1</span><span class="p">)</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nb">set</span> <span class="nv">e-3</span> <span class="p">(</span><span class="nv">digraph:add_edge</span> <span class="nv">graph</span> <span class="nv">v-3</span> <span class="nv">v-4</span><span class="p">))</span>
<span class="p">(</span><span class="nv">$e</span> <span class="o">.</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nb">set</span> <span class="nv">e-4</span> <span class="p">(</span><span class="nv">digraph:add_edge</span> <span class="nv">graph</span> <span class="nv">v-2</span> <span class="nv">v-4</span><span class="p">))</span>
<span class="p">(</span><span class="nv">$e</span> <span class="o">.</span> <span class="mi">3</span><span class="p">)</span>
<span class="nb">&gt;</span><span class="p">(</span><span class="nb">set</span> <span class="nv">e-5</span> <span class="p">(</span><span class="nv">digraph:add_edge</span> <span class="nv">graph</span> <span class="nv">v-4</span> <span class="nv">v-1</span><span class="p">))</span>
<span class="p">(</span><span class="nv">$e</span> <span class="o">.</span> <span class="mi">4</span><span class="p">)</span></code></pre></div>

<p><code>digraph:del_path/3</code> takes three arguments, a graph, a source vertex, and a destination vertex, and removes all edges in a each path in the graph from the source vertex to the destination vertex, until no path exist between the source and destination vertices.</p>

<p>The return value of <code>digraph:del_path/3</code> is always a return value of <code>true</code>.</p>

<p>Looking at the picture of the graph above as reference, we are going to call <code>digraph:del_path/3</code> for the graph with a source vertex of <code>v-1</code>, and a destination vertex of <code>v-4</code>.</p>

<div class="highlight"><pre><code class="language-lisp"><span class="nb">&gt;</span> <span class="p">(</span><span class="nv">digraph:del_path</span> <span class="nv">graph</span> <span class="nv">v-1</span> <span class="nv">v-4</span><span class="p">)</span>
<span class="nv">true</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">digraph:vertices</span> <span class="nv">graph</span><span class="p">)</span>
<span class="p">(</span><span class="nv">v-4</span> <span class="nv">v-3</span> <span class="nv">v-2</span> <span class="nv">v-1</span><span class="p">)</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">digraph:edges</span> <span class="nv">graph</span><span class="p">)</span>
<span class="p">((</span><span class="nv">$e</span> <span class="o">.</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="nv">$e</span> <span class="o">.</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nv">$e</span> <span class="o">.</span> <span class="mi">1</span><span class="p">))</span></code></pre></div>

<p>Translating the edge names, we see that the edge from <code>v-1</code> to <code>v-2</code> has been removed, as well as the edge from <code>v-2</code> to <code>v-4</code> has been removed.</p>

<p>So how did <code>digraph</code> come up with this result?</p>

<p>This puzzled me at first, as it wasn't one of the two scenarios I was expecting to see, which were either: remove all edges but the edge from <code>v-4</code> to <code>v-1</code>, or remove only the edge from <code>v-1</code> to <code>v-2</code>.</p>

<p>I then opened the Erlang source code on GitHub for the <a href="https://github.com/erlang/otp/blob/1523be48ab4071b158412f4b06fe9c8d6ba3e73c/lib/stdlib/src/digraph.erl">digraph module</a> to clarify my thinking, and looking at the code it then made sense what was happening.</p>

<p>First <code>digraph:del_path/3</code> calls <code>digraph:get_path/3</code>, and removes all edges in that path, and then recurses until no path is found.</p>

<p>This is when it clicked as to why LFE/Erlang was removing only those edges.</p>

<p>If we call <code>digraph:get_path/3</code> on a fresh version of the graph, we see that it returns the path of <code>v-1 -&gt; v-2 -&gt; v-4</code>.</p>

<div class="highlight"><pre><code class="language-lisp"><span class="nb">&gt;</span> <span class="p">(</span><span class="nv">digraph:get_path</span> <span class="nv">graph</span> <span class="nv">v-1</span> <span class="nv">v-4</span><span class="p">)</span>
<span class="p">(</span><span class="nv">v-1</span> <span class="nv">v-2</span> <span class="nv">v-4</span><span class="p">)</span></code></pre></div>

<p>LFE then removes the edges in that path, and the will call <code>digraph:del_path/3</code>, which calls <code>digraph:get_path/3</code> again, but as we removed the edge between <code>v-1</code> and <code>v-2</code>, no path is found so the process is finished.</p>

<p>This is why we see more edges removed if we reset the Graph again (by exiting the shell and recreating it from scratch by pasting the initialization into the shell), and call <code>digraph:del_path/3</code> between <code>v-2</code> and <code>v-4</code>.</p>

<div class="highlight"><pre><code class="language-lisp"><span class="nb">&gt;</span> <span class="p">(</span><span class="nv">digraph:del_path</span> <span class="nv">graph</span> <span class="nv">v-2</span> <span class="nv">v-4</span><span class="p">)</span>
<span class="nv">true</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">digraph:edges</span> <span class="nv">graph</span><span class="p">)</span>
<span class="p">((</span><span class="nv">$e</span> <span class="o">.</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="nv">$e</span> <span class="o">.</span> <span class="mi">0</span><span class="p">))</span></code></pre></div>

<p>This case there are the paths <code>v-2 -&gt; v-4</code> and <code>v-2 -&gt; v-3 -&gt; v-4</code>, and if we remove the path <code>v-2 -&gt; v-4</code>, the removal of all the edges associated with that path doesn't break the path of <code>v-2 -&gt; v-3 -&gt; v-4</code>, so it can remove all edges in that path as well.</p>

<p>So we have a win in the case where the documentation wasn't quite as clear as it could be, but having the Erlang standard library be open source gets us a win because we can always go in and check out what the code is really doing.</p>

<p>- Proctor, Robert</p>

          <hr>
          <div class="pagination btn-group">
            
            <a class="btn prev" href="/tutorials/2015/11/16/0023-lfe-friday---digraphget_cycle2" title="LFE Friday - digraph:get_cycle/2">&larr; Previous</a>
            
            <a class="btn" href="/archive.html">Archive</a>
            
            <a class="btn next" href="/tutorials/2015/11/28/1721-lfe-friday---ets-introduction-part-1" title="LFE Friday - ETS Introduction, part 1">Next &rarr;</a>
            
          </div>
          <hr>
          
        </div>

        <div class="span4">
          <section>
            <h4>Author</h4>
            <div class="author"><span><a href="/authors.html#Robert Virding">Robert Virding</a></span></div>
          </section>
          <section>
            <h4>Published</h4>
            <div class="date"><span>27 November 2015</span></div>
          </section>
          
          <section>
            <h4>Category</h4>
            <span class="category">
              tutorials
            </span>
          </section>
          
          
          <section>
            <h4>Tags</h4>
            <ul class="tag_box">
              
              


  
     
    	<li><a href="/tags.html#lfe friday-ref">lfe friday <span>58</span></a></li>
     
    	<li><a href="/tags.html#lfe-ref">lfe <span>63</span></a></li>
     
    	<li><a href="/tags.html#erlang-ref">erlang <span>71</span></a></li>
    
  



            </ul>
          </section>
          
        </div>
      </div>


    </div>
  </div> <!-- /container -->
</div>




    <div id="footer" >
    <div class="lower_footer">
      <ul class="footer-cell">
        <li><a href="/archive.html">Archives</a></li>
        <li><a href="/categories.html">Categories</a></li>
        <li><a href="/tags.html">Tags</a></li>
        <li><a href="/authors.html">Authors</a></li>
        <li><a href="/pages.html">Pages</a></li>
      </ul>

      <span class="footer-cell">
        <a href="/"><img src="/assets/themes/lfe/images/logo-white.png"/></a>
      </span>

      <ul class="footer-cell">
        <li><a href="http://github.com/lfex">lfex</a></li>
        <li><a href="https://groups.google.com/forum/#!forum/lisp-flavoured-erlang">List</a></li>
        <li><a href="http://webchat.freenode.net/?channels=erlang-lisp">IRC</a></li>
        <li><a href="http://feeds.feedburner.com/lfe/news-and-updates">RSS</a></li>
        <li><a href="http://twitter.com/ErlangLisp">Twitter</a></li>
        <li><a href="http://github.com/rvirding/lfe">Github</a></li>
      </ul>
    </div>

    <div class="wrapper">
      <p>Original Design &copy; <span class="js-year"></span> GitHub, Inc.</p>
      <p>LFE Design and Content &copy; <span class="js-year"></span> LFEuminati | Alien Alliance</p>
    </div>

  </div><!-- /#footer -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/assets/themes/lfe/js/jquery.min.js"><\/script>')</script>
    <script src="/assets/themes/lfe/bootstrap/js/bootstrap.min.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-38274766-2', 'auto');
      ga('send', 'pageview');

    </script>
  </body>
</html>

