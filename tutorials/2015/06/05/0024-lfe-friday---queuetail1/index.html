

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>
      LFE Blog
      
         - LFE Friday - queue:tail/1
      
    </title>
    <meta name="description" content="">
    <meta name="author" content="LFEuminati | Alien Alliance">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="/assets/themes/lfe/css/reset.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="/assets/themes/lfe/css-social-buttons/css/zocial.stripped.css">
    <link href="/assets/themes/lfe/css/darkstrap.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/lfe/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/css/twilight.css" rel="stylesheet" type="text/css" media="all">

    <link href="/assets/themes/lfe/css/lfetheme.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/lfe/css/pygments.css" media="screen" rel="stylesheet" type="text/css">
    <link href="/assets/css/overrides.css" rel="stylesheet" type="text/css" media="all">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="LFE News & Updates Atom Feed">
  </head>
  <body class="overview">
    <div id="header-wrapper">
      <div id="header">
        <div>
          <a class="logo" href="/">LFE Blog</a>
          <ul class="nav">
            <li><a href="/archive.html" class="nav-api">Archives</a></li>
            <li><a href="/categories.html" class="nav-developers">Categories</a></li>
            <li><a href="/tags.html" class="nav-developers">Tags</a></li>
            <li><a href="/authors.html">Authors</a></li>
            <li class="divider">|</li>
            <li><a href="http://plan.lfe.io/">.plan</a></li>
            <li><a href="http://docs.lfe.io/">docs.lfe.io</a></li>
            <li><a href="http://lfe.io/">lfe.io</a></li>
          </ul>
        </div>
      </div><!-- #header -->
    </div><!-- #header-wrapper -->

    

<div class="wrapper">
  <div class="container">
    <div class="content">
      
      <div class="page-header">
        <h1>
          LFE Friday - queue:tail/1
          
        </h1>
      </div>

      <div class="row">
        <div class="span8">
          
<p><a href="/assets/images/posts/LispFlavoredErlang-medium-square.png"><img class="left tiny" src="/assets/images/posts/LispFlavoredErlang-medium-square.png" /></a>This week's LFE Friday was translated with permission from the
<a href="http://www.proctor-it.com/category/erlang/erlang-thursday/">Erlang Thursday</a>
series by <a href="https://twitter.com/stevenproctor">Steven Proctor</a>.
<em>This week's translator</em>: Robert Virding.</p>

<p>In today's LFE Friday we continue with the <code>queue</code> module's Okasaki API, and look at <a href="http://erlang.org/doc/man/queue.html#tail-1">queue:tail/1</a>.</p>

<p><code>queue:tail/1</code> takes a non-empty queue as its argument, and returns a new queue with the first element removed.</p>

<div class="highlight"><pre><code class="language-lisp"><span class="nb">&gt;</span> <span class="p">(</span><span class="nb">set</span> <span class="nv">queue</span> <span class="p">(</span><span class="nv">queue:from_list</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">)))</span>
<span class="o">#(</span><span class="p">(</span><span class="mi">5</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nb">set</span> <span class="nv">tail</span> <span class="p">(</span><span class="nv">queue:tail</span> <span class="nv">queue</span><span class="p">))</span>             
<span class="o">#(</span><span class="p">(</span><span class="mi">5</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>
<span class="nb">&gt;</span> <span class="nv">queue</span>
<span class="o">#(</span><span class="p">(</span><span class="mi">5</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:head</span> <span class="nv">tail</span><span class="p">)</span>
<span class="mi">2</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:to_list</span> <span class="nv">tail</span><span class="p">)</span>
<span class="p">(</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">)</span></code></pre></div>

<p>We can see above that calling <code>queue:tail/1</code> is not a destructive operation as might happen in other languages, and does indeed leave the original queue intact.</p>

<p>As part of the Okasaki API, which treats a queue as a double ended, <code>queue:tail/1</code> has a counterpart function <a href="http://erlang.org/doc/man/queue.html#liat-1">queue:liat/1</a> which will return a new queue with last item removed.  <code>queue:liat/1</code> also has an alias in the Okasaki API of <a href="http://erlang.org/doc/man/queue.html#init-1">queue:init/1</a>.</p>

<div class="highlight"><pre><code class="language-lisp"><span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:liat</span> <span class="nv">queue</span><span class="p">)</span>
<span class="o">#(</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:init</span> <span class="nv">queue</span><span class="p">)</span>
<span class="o">#(</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>
<span class="nb">&gt;</span> <span class="nv">queue</span>
<span class="o">#(</span><span class="p">(</span><span class="mi">5</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span></code></pre></div>

<p>Note that the Erlang documentation also shows that there is an alias <code>queue:lait/1</code> which it points out <strong><em>should not</em></strong> be used because it is a misspelling.</p>

<p>And because we want to try to break things and see what we can learn, let's try to call the different tail functions we have covered so far with an empty queue to see what happens.</p>

<div class="highlight"><pre><code class="language-lisp"><span class="nb">&gt;</span> <span class="p">(</span><span class="nb">set</span> <span class="nv">empty-queue</span> <span class="p">(</span><span class="nv">queue:new</span><span class="p">))</span>
<span class="o">#(</span><span class="p">()</span> <span class="p">())</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:tail</span> <span class="nv">empty-queue</span><span class="p">)</span>
<span class="nv">exception</span> <span class="nv">error:</span> <span class="nv">empty</span>
  <span class="nv">in</span> <span class="p">(</span><span class="err">:</span> <span class="nv">queue</span> <span class="nv">drop</span> <span class="o">#(</span><span class="p">()</span> <span class="p">()))</span>

<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:liat</span> <span class="nv">empty-queue</span><span class="p">)</span>
<span class="nv">exception</span> <span class="nv">error:</span> <span class="nv">empty</span>
  <span class="nv">in</span> <span class="p">(</span><span class="err">:</span> <span class="nv">queue</span> <span class="nv">drop_r</span> <span class="o">#(</span><span class="p">()</span> <span class="p">()))</span>

<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:init</span> <span class="nv">empty-queue</span><span class="p">)</span>
<span class="nv">exception</span> <span class="nv">error:</span> <span class="nv">empty</span>
  <span class="nv">in</span> <span class="p">(</span><span class="err">:</span> <span class="nv">queue</span> <span class="nv">drop_r</span> <span class="o">#(</span><span class="p">()</span> <span class="p">()))</span></code></pre></div>

<p>Looks like we get exception errors in <a href="http://erlang.org/doc/man/queue.html#drop-1">queue:drop/1</a> and <a href="http://erlang.org/doc/man/queue.html#drop_r-1">queue:drop_r/1</a> when we call <code>queue:tail/1</code> and <code>queue:liat/1</code> respectively.</p>

<p>And when we look at the behavior of <code>queue:drop/1</code> and <code>queue:drop_r/1</code> with a queue with items in it, it looks like <code>queue:tail/1</code> is just an alias for <code>queue:drop/1</code>, and <code>queue:liat/1</code> and <code>queue:init/1</code> are just aliases for <code>queue:drop_r/1</code>.</p>

<div class="highlight"><pre><code class="language-lisp"><span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:drop</span> <span class="nv">queue</span><span class="p">)</span>
<span class="o">#(</span><span class="p">(</span><span class="mi">5</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:drop_r</span> <span class="nv">queue</span><span class="p">)</span>
<span class="o">#(</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span></code></pre></div>

<p>–Proctor, Robert</p>

          <hr>
          <div class="pagination btn-group">
            
            <a class="btn prev" href="/tutorials/2015/05/29/0345-lfe-friday---queuehead1" title="LFE Friday - queue:head/1">&larr; Previous</a>
            
            <a class="btn" href="/archive.html">Archive</a>
            
            <a class="btn next" href="/tutorials/2015/06/14/2228-lfe-friday---queuepeek1" title="LFE Friday - queue:peek/1">Next &rarr;</a>
            
          </div>
          <hr>
          
        </div>

        <div class="span4">
          <section>
            <h4>Author</h4>
            <div class="author"><span><a href="/authors.html#Robert Virding">Robert Virding</a></span></div>
          </section>
          <section>
            <h4>Published</h4>
            <div class="date"><span>05 June 2015</span></div>
          </section>
          
          <section>
            <h4>Category</h4>
            <span class="category">
              tutorials
            </span>
          </section>
          
          
          <section>
            <h4>Tags</h4>
            <ul class="tag_box">
              
              


  
     
    	<li><a href="/tags.html#lfe friday-ref">lfe friday <span>58</span></a></li>
     
    	<li><a href="/tags.html#lfe-ref">lfe <span>63</span></a></li>
     
    	<li><a href="/tags.html#erlang-ref">erlang <span>71</span></a></li>
    
  



            </ul>
          </section>
          
        </div>
      </div>


    </div>
  </div> <!-- /container -->
</div>




    <div id="footer" >
    <div class="lower_footer">
      <ul class="footer-cell">
        <li><a href="/archive.html">Archives</a></li>
        <li><a href="/categories.html">Categories</a></li>
        <li><a href="/tags.html">Tags</a></li>
        <li><a href="/authors.html">Authors</a></li>
        <li><a href="/pages.html">Pages</a></li>
      </ul>

      <span class="footer-cell">
        <a href="/"><img src="/assets/themes/lfe/images/logo-white.png"/></a>
      </span>

      <ul class="footer-cell">
        <li><a href="http://github.com/lfex">lfex</a></li>
        <li><a href="https://groups.google.com/forum/#!forum/lisp-flavoured-erlang">List</a></li>
        <li><a href="http://webchat.freenode.net/?channels=erlang-lisp">IRC</a></li>
        <li><a href="http://feeds.feedburner.com/lfe/news-and-updates">RSS</a></li>
        <li><a href="http://twitter.com/ErlangLisp">Twitter</a></li>
        <li><a href="http://github.com/rvirding/lfe">Github</a></li>
      </ul>
    </div>

    <div class="wrapper">
      <p>Original Design &copy; <span class="js-year"></span> GitHub, Inc.</p>
      <p>LFE Design and Content &copy; <span class="js-year"></span> LFEuminati | Alien Alliance</p>
    </div>

  </div><!-- /#footer -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/assets/themes/lfe/js/jquery.min.js"><\/script>')</script>
    <script src="/assets/themes/lfe/bootstrap/js/bootstrap.min.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-38274766-2', 'auto');
      ga('send', 'pageview');

    </script>
  </body>
</html>

